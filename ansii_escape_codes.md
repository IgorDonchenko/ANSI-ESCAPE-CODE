Есть много программ, печатающих что-нибудь в терминал. Но это можно сильно разнообразить: можно покрасить текст, двигать курсор или переписать какой-нибудь текст поверх старого. Благодаря этому в Git красивые прогресс-бары, а Vim и Nano позволяют редактировать текст внутри терминала, как будто это происходит в обычном блокноте.

Существуют библиотеки, которые помогают такой в работе с терминалом. Но куда круче научиться делать это самостоятельно. В этой статье мы рассмотрим что можно сделать простой командой `print` в Python.

Большинство программ взаимодействуют с терминалом через управляющие коды ANSI. Это специальные коды, которые можно распечатать, чтобы дать инструкции для терминала. В терминалах разных систем поддерживаются разные коды. В Википедии есть список поддерживаемых кодов. Тем не менее, можно писать программы, использующие управляющие коды ANSI, и они будут работать на распространенных системах Unix, таких как Ubuntu или OS-X (но не на Windows, о которой мы не будем говорить, это отдельное приключение!).

Начнём с простого вывода в консоль:

![sample text](https://dvmn.org/media/filer_public/97/4a/974aeddc-2687-4df5-964c-699a0458bf12/screenshot_from_2019-02-01_17-42-25.png)


# Покраска текста

## Красный

Самое простое, что можно сделать с текстом, это покрасить его. ANSII коды для этого выглядят так:

* Красный: `\u001b[31m`
* Вернуть как было: `\u001b[0m`

С комбинации `\u001b` начинаются большинство ANSII кодов. Сразу к делу, вот как покрасить `Hello, World!`:

![sample text](https://dvmn.org/filer/canonical/1549030565/29/)

Если присмотреться, можно заметить, что покрасилась не только нужная фраза, но и остальное. Терминал получил команду "Теперь выводи всё красным", поэтому он покрасил и всё, что мы вводили далее. Как вы видите, он прекратил "красный" вывод, когда получил команду "Верни как было".

Чтобы получилось аккуратно, лучше ставить команду "Верни как было" сразу после фразы:

![sample text](https://dvmn.org/filer/canonical/1549033035/30/)

## Больше цветов

С этим разобрались, а как ещё можно красить? У болшинства терминалов есть 8 базовых цветов:

* Чёрный: `\u001b[30m`
* Красный: `\u001b[31m`
* Зелёный: `\u001b[32m`
* Жёлтый: `\u001b[33m`
* Синий: `\u001b[34m`
* Пурпурный: `\u001b[35m`
* Голубой: `\u001b[36m`
* Белый: `\u001b[37m`
* Сброс цвета: `\u001b[0m`

![sample text](https://dvmn.org/filer/canonical/1549033616/31/)

Чтобы сделать цвет ярче, можно прибавить к коду `;1`. Получается ещё 8 цветов:

* Яркий чёрный: `\u001b[30;1m`
* Яркий красный: `\u001b[31;1m`
* Яркий зелёный: `\u001b[32;1m`
* Яркий жёлтый: `\u001b[33;1m`
* Яркий синий: `\u001b[34;1m`
* Яркий пурпурный: `\u001b[35;1m`
* Яркий голубой: `\u001b[36;1m`
* Яркий белый: `\u001b[37;1m`
* Сброс цвета: `\u001b[0m`

![sample text](https://dvmn.org/filer/canonical/1549034188/32/)

## Все цвета

Всего в ANSII 256 цветов. Они составляются так: `\u001b[38;5;$КОДm`, где вместо `КОД` — число от 0 до 256:

![sample text](https://dvmn.org/filer/canonical/1549034798/33/)

# Покраска фона

Работает так же, только коды другие:

* Чёрный: `\u001b[40m`
* Красный: `\u001b[41m`
* Зелёный: `\u001b[42m`
* Жёлтый: `\u001b[43m`
* Синий: `\u001b[44m`
* Пурпурный: `\u001b[45m`
* Голубой: `\u001b[46m`
* Белый: `\u001b[47m`

Сброс цвета такой же: `\u001b[0m`

